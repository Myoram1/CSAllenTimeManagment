<!DOCTYPE html>
<html>
  <head>
    <title>Time Management</title>
    <style>
      body {
          background-color: #e0f2ff; /* background color TEST */
      }

      .study-day {
          background-color: #d5f7d8; /* background color for study days */
      }

      table {
          border-collapse: collapse;
          margin: 10px;
          font-size: 24px; /* Larger font size for the calendar */
          width: 60%;
      }

      th, td {
          padding: 25px;
          text-align: center;
          font-size: 20px;
          font-weight: bold; /* Make the text thicker */
      }

      th {
          background-color: white; /* Change calendar title background */
      }

      button {
          font-size: 16px;
          padding: 5px 10px;
          margin: 10px;
          background-color: #5390d9; /* Change button color to complement background */
          color: white;
          border: none;
          border-radius: 5px;
          cursor: pointer;
      }

      .container {
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
      }

      .calendar-container {
          margin-right: 50px;
      }

      .buttons-container {
          margin-top: -400px; /* Move buttons up to be at the same height as the title */
      }

      #timer {
          font-size: 24px;
          font-weight: bold;
          margin: 10px;
      }

    </style>
  </head>
  <body>
    <div class="container">
      <div class="calendar-container">
	<h1>Time Management</h1>
	<table>
	  <thead>
	    <tr>
	      <th colspan="7" id="monthName"></th>
	    </tr>
	    <tr>
	      <th>Sun</th>
	      <th>Mon</th>
	      <th>Tue</th>
	      <th>Wed</th>
	      <th>Thu</th>
	      <th>Fri</th>
	      <th>Sat</th>
	    </tr>
	  </thead>
	  <tbody id="calendarBody">
	  </tbody>
	</table>
      </div>
      <div class="buttons-container">
	<button id="prevMonthBtn">Prev Month</button>
	<button id="nextMonthBtn">Next Month</button>
	<button id="addAssignmentBtn">Add Assignment</button>
	<div>
	  <label for="studyTime">Focus Timer (min): </label>
	  <input type="number" id="studyTime" min="1">
	  <button id="startTimer">Start Timer</button>
	  <p id="timer"></p>
	</div>
      </div>
    </div>
    <script>
      let currentMonth = new Date();
      let calendarBody = document.getElementById("calendarBody");
      let monthName = document.getElementById("monthName");

      function displayCalendar() {
          let firstDay = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), 1);
          let lastDay = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 0);
          let daysInMonth = lastDay.getDate();

          monthName.innerText = new Intl.DateTimeFormat("en-US", { month: "long", year: "numeric" }).format(currentMonth);

          calendarBody.innerHTML = "";

          let currentDayOfWeek = firstDay.getDay();
          let currentDayOfMonth = 1;
          for (let week = 0; week < 6; week++) {
              let row = document.createElement("tr");

              for (let dayOfWeek = 0; dayOfWeek < 7; dayOfWeek++) {
                  let day = document.createElement("td");

                  if (week === 0 && dayOfWeek < currentDayOfWeek || currentDayOfMonth > daysInMonth) {
                      day.innerText = '';
                  } else {
                      day.innerText = currentDayOfMonth++;
                  }

                  row.appendChild(day);
              }
              calendarBody.appendChild(row);
          }
      }

      displayCalendar();

      document.getElementById("prevMonthBtn").addEventListener("click", function () {
          currentMonth.setMonth(currentMonth.getMonth() - 1);
          displayCalendar();
      });

      document.getElementById("nextMonthBtn").addEventListener("click", function () {
          currentMonth.setMonth(currentMonth.getMonth() + 1);
          displayCalendar();
      });

      document.getElementById("addAssignmentBtn").addEventListener("click", function () {
          // ...
      });

      function getCellByDate(dateObj) {
          // ...
      }

      // Timer functionality
      let studyTimeInput = document.getElementById("studyTime");
      let startTimerButton = document.getElementById("startTimer");
      let timerDisplay = document.getElementById("timer");
      let timer;

      startTimerButton.addEventListener("click", function () {
          let studyMinutes = parseInt(studyTimeInput.value);
          if (!studyMinutes || studyMinutes < 1) {
              alert("Please enter a valid study time in minutes.");
              return;
          }

          let endTime = new Date().getTime() + studyMinutes * 60 * 1000;

          clearInterval(timer);
          timer = setInterval(function () {
              let now = new Date().getTime();
              let distance = endTime - now;

              if (distance <= 0) {
                  clearInterval(timer);
                  timerDisplay.innerHTML = "Time's up!";
                  return;
              }

              let minutes = Math.floor(distance / (1000 * 60));
              let seconds = Math.floor((distance % (1000 * 60)) / 1000);

              timerDisplay.innerHTML = minutes + "m " + seconds + "s";
          }, 1000);
      });
    </script>
  </body>
  </html>
